# InnerForge — Домашние тренировки (Django)

Минимально жизнеспособная реализация по ТЗ:

- Роли: гость (логин), пользователь (главный экран, выбор/старт/прохождение, история), админ (создание/редактирование/архив тренировки и упражнения, загрузка медиа). Флаг админа: `is_staff`.
- Главный экран: панель текущей недели (Пн–Вс) с зелёной подсветкой выполненных дней, выделение текущего дня, кнопки «Начать тренировку»/«Выбрать тренировку», секция «Выбранная тренировка». Плавающая кнопка «+» для админа.
- Список тренировок: поиск, карточки, выбрать/редактировать/архивировать.
- Экран тренировки (админ): поля тренировки, добавление упражнений (модалка упрощена до отдельной страницы), список упражнений с порядком (числовое поле `position`).
- Прохождение: пошаговый показ упражнений, «Далее/Завершить», запись в историю и экран поздравления.
- Личный кабинет: история с фильтром по датам.

## Запуск (локально)

1. Установите зависимости (внутри `.venv`):

```bash
pip install -r requirements.txt
```

2. Примените миграции и создайте суперпользователя:

```bash
python manage.py migrate
python manage.py createsuperuser
```

3. Запустите сервер:

```bash
python manage.py runserver
```

Откройте http://127.0.0.1:8000/.

## Настройки

- DEV использует SQLite по умолчанию. Для PostgreSQL укажите переменные окружения `DATABASE_URL`, `PGHOST`, `PGPORT`, `PGDATABASE`, `PGUSER`, `PGPASSWORD`.
- Медиа: локально сохраняются в `media/`.
- Статика: WhiteNoise включен.
- Язык: ru-ru, Таймзона по умолчанию: Europe/Madrid. Пользовательский профиль хранит таймзону и последнюю выбранную тренировку.

## Архитектура

- Django 5, Templates + Bootstrap 5.3.
- Приложение: `workouts` с моделями `Workout`, `Exercise`, `WorkoutExercise` (позиции/порядок), `Session`, `WorkoutHistory`, `UserProfile`.
- URL-адреса в `workouts/urls.py`.

## Ограничения и валидация

- `Exercise.reps` — положительное целое (обеспечивается типом поля). Доп. валидация может быть добавлена в формах.
- Нельзя начать тренировку без упражнений — проверка при старте.
- Архивирование вместо удаления — флаг `is_active`.

## Дальнейшие улучшения

- Drag-and-drop сортировка через HTMX/Alpine.js.
- Отдельное управление медиа и превью изображений.
- Продолжение незавершённой сессии.
- Отображение длительности в формате мин:сек в Истории.
